(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5466)}])},5466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var s=n(5893),a=n(7294),o=n(4926);async function getBalances(e){let t=await o.Fl.connect("https://rpc-kralum.neutron-1.neutron.org:443");try{let n=await t.queryContractSmart("neutron1qdzn3l4kn7gsjna2tfpg3g3mwd6kunx4p50lfya59k02846xas6qslgs3r",JSON.parse('{\n      "positions": {\n        "account_id": "'.concat(e,'"\n      }\n    }')));return n}catch(e){console.error(e)}}async function getPrices(){try{let e=await fetch("https://api.astroport.fi/api/tokens?chainId=neutron-1"),t=await e.json();return console.log(t),t}catch(e){return console.error(e),null}}var c=n(7162),l=n.n(c);function Home(){let[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[r,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("cachedAccountId");e&&(o(e),handleFetch(e))},[]);let handleFetch=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;t(!0);let s=await getBalances(e),a=await getPrices();console.log(a),u(s),i(a),t(!1),localStorage.setItem("cachedAccountId",e)},getTokenInfo=e=>{let t=null==r?void 0:r.find(t=>t.denom===e);return t||{decimals:0,priceUSD:0,symbol:e,icon:""}},convertAmount=(e,t)=>{let{decimals:n}=getTokenInfo(t);return parseFloat(e)/Math.pow(10,n)},calculateUsdValue=(e,t)=>{let{priceUSD:n}=getTokenInfo(t);return e*n};c&&(e=>{let sumAmounts=e=>e.reduce((e,t)=>e+convertAmount(t.amount,t.denom),0);sumAmounts(e.deposits||[]),sumAmounts(e.lends||[]),sumAmounts(e.staked_astro_lps||[]),sumAmounts(e.vaults||[])})(c);let d=c?c.debts.reduce((e,t)=>e+convertAmount(t.amount,t.denom),0):0,m=c?c.deposits.concat(c.lends,c.staked_astro_lps,c.vaults).reduce((e,t)=>e+calculateUsdValue(convertAmount(t.amount,t.denom),t.denom),0):0;return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter account ID",value:n,onChange:e=>o(e.target.value),className:l().input}),(0,s.jsx)("button",{className:l().fetchButton,onClick:()=>handleFetch(),disabled:e,children:e?"Loading...":"Fetch Accounts"})]}),c&&(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)("h3",{className:l().title,children:"Balances"}),(0,s.jsxs)("div",{className:l().accountInfo,children:[(0,s.jsxs)("div",{children:["Account ID:"," ",(0,s.jsx)("span",{className:l().accountValue,children:c.account_id})]}),(0,s.jsxs)("div",{children:["Total Balance:"," ",(0,s.jsxs)("span",{className:l().accountValue,children:["$",m.toFixed(2)]})]}),(0,s.jsxs)("div",{children:["Total Debt:"," ",(0,s.jsxs)("span",{className:l().accountValue,children:["$",d.toFixed(2)]})]}),(0,s.jsxs)("div",{children:["Net Worth:"," ",(0,s.jsxs)("span",{className:l().accountValue,children:["$",(m-d).toFixed(2)]})]})]}),(0,s.jsxs)("table",{className:l().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:l().assetHeader,children:"Asset"}),(0,s.jsx)("th",{className:l().valueHeader,children:"Value"}),(0,s.jsx)("th",{className:l().sizeHeader,children:"Size"})]})}),(0,s.jsx)("tbody",{children:c.deposits.concat(c.lends,c.staked_astro_lps,c.vaults).map((e,t)=>{let{symbol:n,icon:a}=getTokenInfo(e.denom),o=c.lends.includes(e),u=c.staked_astro_lps.includes(e);return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:l().assetCell,children:[a&&(0,s.jsx)("img",{src:a,alt:n,width:20,height:20,className:l().assetIcon}),(0,s.jsx)("span",{className:l().assetName,children:n}),o&&(0,s.jsx)("span",{className:l().lentText,children:"(lent)"}),u&&(0,s.jsx)("span",{className:l().stakedText,children:"(staked)"})]}),(0,s.jsxs)("td",{className:l().valueCell,children:["$",calculateUsdValue(convertAmount(e.amount,e.denom),e.denom).toFixed(2)]}),(0,s.jsx)("td",{className:l().sizeCell,children:convertAmount(e.amount,e.denom).toFixed(6)})]},t)})})]})]})]})}},7162:function(e){e.exports={extensionContainer:"home_extensionContainer__JZ0fy",inputContainer:"home_inputContainer__SgRB4",input:"home_input__wIbzY",fetchButton:"home_fetchButton__p5w3j",container:"home_container__8Eizc",title:"home_title__AmF9d",accountInfo:"home_accountInfo__4Xerg",accountValue:"home_accountValue__0Klt8",table:"home_table__RMoxM",assetHeader:"home_assetHeader__phDPv",valueHeader:"home_valueHeader__Y5eRq",sizeHeader:"home_sizeHeader__59wuN",assetCell:"home_assetCell__oNhk0",assetIcon:"home_assetIcon__3_qxA",assetName:"home_assetName__oPdEY",lentText:"home_lentText__qBKc5",stakedText:"home_stakedText___rdaX",valueCell:"home_valueCell__2TBI4",sizeCell:"home_sizeCell__z_QgR"}},6601:function(){},9214:function(){},5568:function(){},131:function(){},6026:function(){}},function(e){e.O(0,[631,714,417,35,506,677,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);